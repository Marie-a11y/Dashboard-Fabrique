<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard accessibilit√© - D√©monstration</title>
  <link rel="stylesheet" href="/style.min.css">
</head>

<body>
  <header role="banner" class="header">
    <h1 class="title-1">
      <span lang="en">Dashboard</span> accessibilit√©<br />
      <span class="regular">D√©monstration</span>
    </h1>
  </header>
  <main role="main">
    <div class="section section--obj">
      <div class="wrapper">
        <h2 class="title-2">Objectifs</h2>
        <ul>
          <li>
            <div class="icon"><svg aria-hidden="true" focusable="false"><use xlink:href="sprite.svg#monitor"></use></svg></div>
            <span>Monitorer</span> les tests automatis√©s d‚Äôaccessibilit√©
          </li>
          <li>
            <div class="icon"><svg aria-hidden="true" focusable="false"><use xlink:href="sprite.svg#tendance"></use></svg></div>
            <span>Suivre</span> une tendance par site</li>
          <li>
            <div class="icon"><svg aria-hidden="true" focusable="false"><use xlink:href="sprite.svg#analyser"></use></svg></div>
            <span>Analyser</span> les erreurs, par site et par URL
          </li>
          <li>
            <div class="icon"><svg aria-hidden="true" focusable="false"><use xlink:href="sprite.svg#correctives"></use></svg></div>
            <span>Mettre en place</span> des actions correctives
          </li>
        </ul>
      </div>
    </div>
    <div class="section section--lim">
      <div class="wrapper">
        <h2 class="title-2">Limitations</h2>
        <div class="list">
          <div class="icon"><svg aria-hidden="true" focusable="false"><use xlink:href="sprite.svg#limitations"></use></svg></div>
          <ul>
            <li>Cet outil n‚Äôa pas vocation √† indiquer un taux de conformit√©</li>
            <li>Cet outil ne permet pas de tester les pages qui sont derri√®re une authentification ou un acc√®s restreint</li>
            <li>Une page peut avoir 0 erreur et tout de m√™me contenir des probl√®mes d‚Äôaccessibilit√© (<a href="https://www.matuzo.at/blog/building-the-most-inaccessible-site-possible-with-a-perfect-lighthouse-score/" lang="en">Building the most inaccessible site possible with a perfect Lighthouse score</a>)</li>
            <li>Cette analyse devra √™tre compl√©t√©e par une expertise humaine</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="section">
      <div class="wrapper">
        <% if (!Object.keys(results).length) { %>
          <p class="noresults">Aucun r√©sultat disponible pour le moment. Le dossier "results" est vide.</p>
        <% } else { %>
          <h2 class="title-2">Synth√®se du nombre d‚Äôerreur axe-core par site</h2>
          <div id="container" class="chart" aria-hidden="true"></div>
          <button type="button" class="disclosure-trigger">Afficher la synth√®se sous forme de tableau</button>
          <div class="table disclosure-container">
          <table>
            <caption class="sr-only">Synth√®se du nombre d‚Äôerreur axe-core par site</caption>
            <thead>
              <tr>
                <th scope="col">Date</th>
                <% for (const siteName in results) { %>
                  <th scope="col"><%= siteName %></th>
                <% } %>
              </tr>
            </thead>
            <tbody>
              <% allDates.forEach(date => { %>
                <tr>
                  <th scope="row"><%= date %></th>
                  <% for (const siteName in results) { %>
                    <% const siteErrors = (dateResults[date] && dateResults[date][siteName]) ? dateResults[date][siteName] : 0; %>
                    <td><%= siteErrors %></td>
                  <% } %>
                </tr>
              <% }); %>
            </tbody>
          </table>
          </div>
        <% } %>
        <h2 class="title-2">D√©tails des r√©sultats</h2>
        <% let siteIndex = 0; %>
        <% let analysisIndex = 0; %>
        <% let urlIndex = 0; %>
        <% for (const siteName in results) { %>
        <div class="site">
          <h3 id="site-<%= siteIndex %>">Site&nbsp;: <%= siteName %></h3>
          <div class="analysis">
          <% for (const analysis of results[siteName]) { %>
            <div>
              <% let totalErrors = 0; %>
              <% for (const url of analysis.urls) { %>
              <% totalErrors += url.totalViolations; %>
              <% } %>
              <% analysisIndex++; %>
              <h4>
                <% if (totalErrors === 0) { %>
                  <span aria-hidden="true">‚úÖ</span>
                <% } else { %>
                  <span aria-hidden="true">‚ùå</span>
                <% } %>
                <span id="analysis-<%= siteIndex %>-<%= analysisIndex %>">Date de l‚Äôanalyse&nbsp;:
                <%= analysis.analysisDate %></span> -
                <%= totalErrors %> erreurs <button type="button" class="disclosure-trigger" aria-describedby="site-<%= siteIndex %> analysis-<%= siteIndex %>-<%= analysisIndex %>">Afficher les r√©sultats</button></h4>
              <ul class="disclosure-container">
                <% for (const url of analysis.urls) { %>
                <li>
                  <% if (url.totalViolations === 0) { %>
                    <span aria-hidden="true">‚úÖ</span>
                  <% } else { %>
                    <span aria-hidden="true">‚ùå</span>
                  <% } %>
                  <span id="url-<%= siteIndex %>-<%= analysisIndex %>-<%= urlIndex %>">URL&nbsp;:
                  <a href="<%= url.url %>"><%= url.url %></a></span> - <%= url.totalViolations %> erreurs <% if (url.totalViolations != 0) { %><button type="button" class="disclosure-trigger" aria-describedby="site-<%= siteIndex %> analysis-<%= siteIndex %>-<%= analysisIndex %> url-<%= siteIndex %>-<%= analysisIndex %>-<%= urlIndex %>">Afficher les r√©sultats</button><% } %>
                  <% urlIndex++; %>
                  <div class="disclosure-container">
                    <ul>
                      <% for (const violation of url.results) { %>
                      <li>
                        <strong>Description&nbsp;:</strong>
                        <%= violation.description %>
                        <ul>
                          <li><strong>Tags&nbsp;:</strong>
                            <%= violation.tags.join(', ') %>
                          </li>
                          <% if (violation.nodes && violation.nodes.length > 0) { %>
                          <li>
                            <strong>√âl√©ment HTML concern√©&nbsp;</strong>
                            <ul>
                              <% for (const node of violation.nodes) { %>
                              <li>
                                <code>
                                  <%= node.html %></code>
                              </li>
                              <% } %>
                            </ul>
                          </li>
                          <% } %>
                        </ul>
                      </li>
                      <% } %>
                    </ul>
                  </div>
                </li>
                <% } %>
              </ul>
            </div>
          <% } %>
          </div>
          <% siteIndex++; %>
        </div>
        <% } %>
      </div>
    </div>
  </main>
  <footer role="contentinfo" class="footer">
    <div class="wrapper">
      <p>Cet outil lance des tests automatis√©s d‚Äôaccessibilit√© (<a href="https://www.w3.org/TR/WCAG22/">WCAG 2.2</a>) sur un √©chantillon de pages en s‚Äôappuyant sur le moteur <a href="https://github.com/dequelabs/axe-core">axe-core</a>.
      <p><a href="https://gitlab.com/temesis/dashboard-a11y" lang="en">Gitlab dashboard-a11y</a>&nbsp;|&nbsp;<a href="https://gitlab.com/temesis/dashboard-a11y/-/raw/main/LICENSE">Mozilla Public License Version 2.0</a></p>
      <p>Fait avec <span aria-hidden="true">ü§ç</span><span class="sr-only">amour</span> par <a href="https://www.temesis.com/">Temesis</a>.</p>
    </div>
  </footer>
  <script src="/highcharts.js"></script>
  <script src="/script.min.js"></script>
</body>

</html>
